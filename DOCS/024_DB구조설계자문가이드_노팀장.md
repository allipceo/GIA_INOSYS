# Phase 1: DB 구조 설계 자문 가이드

**작성일**: 2025년 8월 22일 18:07 KST  
**작성자**: 노팀장 (Technical Advisor)  
**대상**: 서대리 (Lead Developer) 협업  
**목적**: 노션 5개 핵심 DB 생성 시 기술 자문

---

## I. DB 생성 우선순위 및 자문 요점

### 1.1 생성 순서 (의존성 고려)

**1순위**: Documents_Master (기본 DB)
**2순위**: Projects_Master, People_Network (독립 DB)
**3순위**: Knowledge_Graph (Documents_Master 연결)
**4순위**: Ideas_Incubator (모든 DB 연결)

### 1.2 각 DB별 핵심 자문 사항

#### 📄 Documents_Master (최우선)
**핵심 Relation 설정**:
- `프로젝트연결` → Projects_Master (Many-to-Many)
- `지식연결` → Knowledge_Graph (Many-to-Many)
- `관련인물` → People_Network (Many-to-Many)

**중요 Formula 속성**:
```
중요도점수 = if(prop("중요도") == "매우높음", 5, if(prop("중요도") == "높음", 4, if(prop("중요도") == "보통", 3, if(prop("중요도") == "낮음", 2, 1))))
```

#### 📋 Projects_Master
**GitMind 연동 핵심**:
- `마인드맵링크` (URL): GitMind 직접 연결
- `상위프로젝트` → Projects_Master (Self-Relation)
- `하위프로젝트` → Projects_Master (Self-Relation)

**진행률 Rollup**:
```
관련문서수 = rollup(prop("관련문서"), "length")
완료문서비율 = rollup(prop("관련문서").filter(current.prop("처리상태") == "완료"), "length") / prop("관련문서수") * 100
```

#### 🧠 Knowledge_Graph (핵심)
**창의적 연결 구조**:
- `상위개념` → Knowledge_Graph (Self-Relation)
- `하위개념` → Knowledge_Graph (Self-Relation)  
- `관련개념` → Knowledge_Graph (Many-to-Many Self)

**자동 중요도 계산**:
```
활용도점수 = prop("활용빈도") * 2 + prop("연결문서수") * 3
```

#### 👥 People_Network
**네트워크 연결**:
- `네트워크연결` → People_Network (Many-to-Many Self)
- `관련프로젝트` → Projects_Master (Many-to-Many)

#### 💡 Ideas_Incubator
**전체 연결 허브**:
- `연결지식` → Knowledge_Graph (Many-to-Many)
- `관련인물` → People_Network (Many-to-Many)
- `관련프로젝트` → Projects_Master (Many-to-Many)

---

## II. 노팀장 검증 체크리스트

### 2.1 DB 생성 즉시 검증 항목

**구조 검증**:
- [ ] 모든 필수 속성 생성 완료
- [ ] Relation 방향 정확성 (Many-to-Many vs One-to-Many)
- [ ] Formula 속성 정상 작동
- [ ] Select 옵션값 정확 설정

**관계 검증**:
- [ ] DB 간 양방향 연결 정상
- [ ] Self-Relation 순환 참조 방지
- [ ] Rollup 계산 정확성

### 2.2 샘플 데이터 테스트

**Documents_Master 테스트**:
1. 샘플 문서 3개 입력
2. 프로젝트, 인물, 지식 연결 테스트
3. 중요도 자동 계산 확인

**Knowledge_Graph 테스트**:
1. 계층 구조 테스트 (상위↔하위)
2. 관련 개념 Many-to-Many 연결
3. 활용도 점수 자동 계산

---

## III. 서대리 협업 프로토콜

### 3.1 실시간 자문 방식

**단계별 확인**:
1. **DB 생성 전**: 속성 구조 최종 검토
2. **속성 생성 중**: Relation/Formula 설정 즉시 검증
3. **DB 완성 후**: 전체 구조 및 관계 종합 테스트

### 3.2 문제 발생 시 대응

**일반적 이슈**:
- Relation 방향 오류 → 즉시 수정 가이드
- Formula 오류 → 정확한 수식 제공
- 속성명 불일치 → 표준 명칭 확인

**에스컬레이션 기준**:
- 30분 이상 해결 안 되는 기술적 문제
- 설계 변경이 필요한 구조적 문제

---

## IV. 다음 단계 준비

### 4.1 Phase 2 준비사항

**LLM 프롬프트 최적화**:
- DB 구조에 맞춘 프롬프트 세부 조정
- GitMind 연동을 위한 특화 프롬프트
- 창의적 연결 알고리즘 구체화

### 4.2 즉시 실행 대기

서대리의 DB 생성 시작과 함께 **실시간 기술 자문** 제공 준비 완료.

**연락 체계**: 서대리 → 노팀장 즉시 자문 요청 가능

---

**작성 완료**: 2025년 8월 22일 18:07 KST  
**다음**: 서대리 DB 생성 착수 시 즉시 협업 개시